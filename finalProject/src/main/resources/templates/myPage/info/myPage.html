<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="@{layouts/myPage_layout}">
<head>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@alphardex/aqua.css/dist/aqua.min.css">
</head>
<!-- Content -->
<div layout:fragment="content">
		<div class="container">
			<form action="/admin/modifyMemberInfoForm" th:object="${memberInfo}" method="post">
				<h5><b>회원정보 상세 조회</b></h5>
				<br><br>
				<div class="table-responsive">
					<h6>기본정보</h6>
					<br>
					<table id="defaultInfo" class="table">
						<tbody>
							<tr>
								<th width="150" align="center">아이디</th>
								<td width="400" align="center" th:text="*{memberId}"></td>
								<th width="150" align="center">가입일자</th>
								<td width="400" align="center" th:text="*{#strings.substring(signUpDate,0,10)}"></td>
							</tr>
							<tr>
								<th width="150" align="center">이름</th>
								<td width="400" align="center" th:text="*{memberName}"></td>
							</tr>
							<tr>
								<th width="150" align="center">성별</th>
								<td width="400" align="center" th:text="*{gender}"></td>
								<th width="150" align="center">생년월일</th>
								<td width="400" align="center" th:text="*{#strings.substring(birthDate,0,10)}"></td>
							</tr>
							<tr>
								<th width="150" align="center">국적</th>
								<td width="400" align="center" th:text="*{nationality}"></td>
								<th width="150" align="center">제재횟수</th>
								<td width="400" align="center" th:text="*{punishCount}"></td>
							</tr>
							<tr>
								<th width="150" align="center">주소</th>
								<td colspan="3" width="400" align="center" th:utext="|(*{zipCode}) <br> *{address} *{addressDetail}|"></td>
							</tr>
							<tr>
								<th width="150" align="center">이메일</th>
								<td width="400" align="center" th:text="*{email}"></td>
								<th width="150" align="center">연락처</th>
								<td width="400" align="center" th:text="*{phoneNumber}"></td>
							</tr>
						</tbody>
					</table>
				</div>
				<br><br>
				<div class="table-responsive" th:if="*{authority == 'A2'}">
					<h6>계좌정보</h6>
					<br>
					<table id="accountInfo" class="table">
						<tbody>
							<tr>
								<th width="150" align="center">은행명</th>
								<td width="400" align="center" th:text="*{bankCode}"></td>
								<th width="150" align="center">예금주</th>
								<td width="400" align="center" th:text="*{memberName}"></td>
							</tr>
							<tr>
								<th width="150" align="center">계좌번호</th>
								<td colspan="3" width="400" align="center" th:text="*{accountNumber}"></td>
							</tr>
						</tbody>
					</table>
				</div>
				<div>
					<input type="hidden" name="memberId" th:value="*{memberId}">
				</div>
				<div align="center">
					<button type="button" class="btn btn-primary btn-ghost">수정하기</button>
					<button type="button" class="feature-btn">탈퇴처리</button>
				</div>
			</form>
		</div>
	
	<script th:inline="javascript" type="text/javascript">
	
	$(document).ready(function() {
		$(".btn.btn-primary.btn-ghost").click(function(e){

			console.log("test");
			e.stopPropagation();
			
			Swal.fire({
				showCancelButton: true,
				confirmButtonText: '수정하기',
				cancelButtonText: '취소',
			    reverseButtons: true,
				input: 'text',
				inputLabel: '비밀번호',
				inputPlaceholder: '비밀번호를 입력해주세요.',
				inputAttributes: {
					maxlength: 150,
					autocaptitalize: 'off',
					autocorrect: 'off',
					id: 'inputReason'
				}
				
			      
		    }).then((firstResult) => {
		        if (firstResult.isConfirmed) {
					
		        Swal.fire({
		        	title: '비밀번호를 다시 입력해주세요',
				    icon: 'warning',
				    showCancelButton: true,
				    confirmButtonColor: '#3085d6',
				    cancelButtonColor: '#d33',
				    confirmButtonText: '승인',
				    cancelButtonText: '취소',
				    reverseButtons: true,
			        
		        }).then((secondResult) => {
		        	
		        	if(secondResult.isConfirmed){
		        		let form = document.getElementById("form");
						form.memberId.value = e.currentTarget.closest('tr').firstElementChild.textContent;
						form.rejectReasonDetail.value = firstResult.value;
						form.action = "rejectAuthRequest";
						form.submit();
		        	}
		        })
		        	
		      }
		    })		 
		})
	})
	
	</script>
</div>

</html>