<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="@{layouts/admin_layout}">
<head>
    <meta charset="UTF-8">
    <title>가이드 메인 페이지</title>
    <!-- billboard.js -->
    <link rel="stylesheet" href="https://naver.github.io/billboard.js/release/latest/dist/theme/datalab.min.css">
    <script src="https://naver.github.io/billboard.js/release/latest/dist/billboard.pkgd.min.js"></script>

    <style>
        .rounded-box {
            border-radius: 10px;
            padding: 10px;
            margin: 10px;
            border: 1px solid #CCCCCC;
            padding-bottom: 0px;
        }

        .main-icon{
            font-size: 5em;
            color: #2cbdb8;
        }
        .guide-main-nav{
            list-style: none;
            display: flex;
            justify-content: space-between;
            padding: 0;
        }
        .guide-main-nav li{
            text-align: center;
            flex: 1;
            margin: 0;
            padding: 10px;
        }
        .guide-main-nav .main-icon {
            margin-bottom: 20px; /* 아이콘과 텍스트 사이의 여백 조절 */
        }
        .info{
            min-height: 266px;
        }
    </style>
</head>
<body>
<div layout:fragment="content">
    <div class="container">
        <div class="rounded-box" >
            <ul class="guide-main-nav">
                <li onclick="window.location.href='/'">
                    <i class="fa-solid fa-user main-icon"></i>
                    <div>내 정 보</div>
                </li>
                <li onclick="window.location.href='/'">
                    <i class="fa-solid fa-store main-icon"></i>
                    <div>상품판매중</div>
                </li>
                <li onclick="window.location.href='/'">
                    <i class="fa-solid fa-shop-lock main-icon"></i>
                    <div>상품판매완료</div>
                </li>
                <li onclick="window.location.href='/'">
                    <i class="fa-solid fa-clipboard-question main-icon"></i>
                    <div>미답변내역</div>
                </li>
            </ul>
        </div>
        <br>
        <div class="guide-main-info">
            <div class="row">
                <div class="col-md-6">
                    <div class="rounded-box info">
                        <h6>패키지 판매</h6>
                        <table class="table table-sm" th:if="${!#lists.isEmpty(packageSaleList)}">
                            <tr>
                                <td>패키지명</td>
                                <td>패키지테마</td>
                                <td>주문자명</td>
                                <td>주문일자</td>
                            </tr>
                            <tr th:each="packageSaleInfo : ${packageSaleList}">
                                <td th:text="${packageSaleInfo.name}"></td>
                                <td th:text="${packageSaleInfo.tourTheme}"></td>
                                <td th:text="${packageSaleInfo.writerId}"></td>
                                <td th:text="${#dates.format(packageSaleInfo.orderDate, 'yyyy.MM.dd')}"></td>
                            </tr>
                        </table>
                        <div th:if="${#lists.isEmpty(packageSaleList)}">
                            <hr>
                            <h6>판매 내역이 없습니다.</h6>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="rounded-box info">
                        <h6>매출 통계</h6>
                        <div id="chart"></div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="rounded-box info">
                        <h6>입금 내역</h6>
                        <table class="table table-sm" th:if="${!#lists.isEmpty(calculationList)}">
                            <tr>
                                <td>패키지명</td>
                                <td>정산금</td>
                                <td>처리상태</td>
                                <td>정산일자</td>
                            </tr>
                            <tr th:each="calculationInfo : ${calculationList}">
                                <td th:text="${calculationInfo.name}"></td>
                                <td th:text="${calculationInfo.calAmount}"></td>
                                <td th:text="${calculationInfo.calStatus}"></td>
                                <td th:text="${#dates.format(calculationInfo.calDate, 'yyyy.MM.dd')}"></td>
                            </tr>
                        </table>
                        <div th:if="${#lists.isEmpty(calculationList)}">
                            <hr>
                            <h6>정산 내역이 없습니다.</h6>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="rounded-box info">
                        <h6>최근 문의</h6>
                        <table class="table table-sm" th:if="${!#lists.isEmpty(questionList)}">
                            <tr>
                                <td>문의명</td>
                                <td>문의자명</td>
                                <td>처리상태</td>
                                <td>문의일자</td>
                            </tr>
                            <tr th:each="questionInfo : ${questionList}">
                                <td th:text="${questionInfo.questionTitle}"></td>
                                <td th:text="${questionInfo.name}"></td>
                                <td th:text="${questionInfo.answerResult}"></td>
                                <td th:text="${#dates.format(questionInfo.questionDate, 'yyyy.MM.dd')}"></td>
                            </tr>
                        </table>
                        <div th:if="${#lists.isEmpty(questionList)}">
                            <hr>
                            <h6>문의 내역이 없습니다.</h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script th:inline="javascript">
        let list = [[${saleChartList}]];

        let dataColums = [];
        dataColums.push("매출액");
        for(let i = 0; i < list.length; i++) {
            dataColums.push(list[i].totalPrice);
        }

        let orderMonthColums = [];
        let orderMonthString = '';
        for(let i = 0; i < list.length; i++) {
            orderMonthString = list[i].orderMonth;
            orderMonthColums.push(orderMonthString);
        }

        let chart = bb.generate({
            data:{
                columns:[
                    dataColums
                ],
                type: "line",
            },
            size: {
                height: 200 // 원하는 높이 (픽셀)를 설정합니다.
            },
            axis:{
                x:{
                    type: "category",
                    categories: orderMonthColums,
                    label: "최근 5개월"
                },
                y:{
                    label: "매출액"
                }
            },
            bindto : "#chart",


        });


    </script>
</div>
</body>
</html>