<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="@{layouts/default_layout}"
	layout:fragment="content">
<head>
<meta charset="UTF-8">
<title>여행 메이트 상세 조회</title>
<!-- index.html 고유 CSS 추가 -->
<th:block layout:fragment="css"></th:block>
<!-- index.html 고유 스크립트 추가 -->
<th:block layout:fragment="script"></th:block>
<style>
body {
	background-color: #fff;
	font-family: 'Roboto', sans-serif;
	font-weight: 400;
	color: #333;
}

h1 {
	color: #333;
}

table {
	width: 100%;
	border-collapse: collapse;
	margin-bottom: 20px;
}

th, td {
	padding: 10px;
	text-align: left;
	border: 1px solid #ddd;
}

th {
	background-color: #f5f5f5;
}

textarea {
	width: 100%;
	padding: 10px;
	border: 1px solid #ddd;
	resize: none;
}

button {
	background-color: #333;
	color: #fff;
	border: none;
	padding: 10px 20px;
	cursor: pointer;
}

button:hover {
	background-color: #222;
}

p {
    padding: 5px;
    margin-bottom: 5px;
    margin-left : 10px;
}

table {
	width: 100%;
	border-collapse: collapse;
	margin-bottom: 20px;
	margin: 10px;
	padding: 10px;
}
    .report-form {
        display: inline;
        background-color: #f2f2f2;
        padding: 10px;
        border-radius: 5px;
    }

    .report-form label {
        font-weight: bold;
    }

    .report-form select {
        width: 200px;
        padding: 5px;
        border: 1px solid #ccc;
        border-radius: 3px;
    }

    .report-form input[type="submit"] {
        background-color: #333;
        color: white;
        padding: 8px 16px;
        border: 1px solid black;
        border-radius: 0;
        cursor: pointer;
    }

    .report-form input[type="submit"]:hover {
        background-color: #222;
    }
</style>
</head>
<body>
	<div align="center">
		<br>
		<br>
		<h1>여행 메이트 글 상세보기</h1>
		<br>
	</div>
	<div id="ls2" align="center">
		<table border="1" style="width: 80%;">
			<tr>
				<th width="70">여행 지역</th>
				<td width="50" align="center" th:text="${tripMateInfo.tripArea}" ></td>
				<th width="100">작성자</th>
				<td width="150" align="center" th:text="${tripMateInfo.writerId}"></td>
				<th width="100">등록일자</th>
				<td width="150" align="center" th:text="${#dates.format(tripMateInfo.writeDate, 'yy년 MM월 dd일 hh:mm:ss')}"></td>
				<th width="100">조회수</th>
				<td width="70" align="center" th:text="${tripMateInfo.hit}"></td>
			</tr>
			<tr>
				<th colspan="2">여행 타이틀</th>
				<td colspan="6" align="center" th:text="${tripMateInfo.mateTitle}">
				</td>
			</tr>
			<tr>
				<th colspan="1">여행 기간</th>
				<td colspan="3" align="center">[[${#dates.format(tripMateInfo.startDay, 'yy년 MM월 dd일')}]] ~ [[${#dates.format(tripMateInfo.endDay, 'yy년 MM월 dd일')}]]</td>
				<th width="100">모집 인원</th>
				<td width="110" align="center" th:text="${tripMateInfo.mateMax}"></td>
				<th width="100">신청 인원</th>
				<td width="110" align="center" th:text="${tripMateInfo.applyNum}"></td>
			</tr>
			<tr>
				<td colspan="8">
				<th:textarea rows="30" th:utext="${tripMateInfo.mateContent}" readonly ></th:textarea>
				</td>
			</tr>
		</table>
	</div>
	<div align="center">
		<form id="sendData" action="tripMateApplyForm" method="post">
			<input type="hidden" name="postId" th:value="${tripMateInfo.postId}">
			<input type="hidden" name="mateWriter" th:value="${tripMateInfo.writerId}">
			<button th:if="${session.sessionId} != null and ${session.sessionId} != ${tripMateInfo.writerId}" type="submit" class="primary-btn">
			신청하기</button>&nbsp;&nbsp;
			<button th:if="${session.sessionId} != null and ${session.sessionId} != ${tripMateInfo.writerId}" type="button" class="primary-btn" 
			th:onclick="|location.href='@{/mateRecruitReportForm(postId=${tripMateInfo.postId})}'|">신고하기</button>&nbsp;&nbsp;
			<button th:if="${session.sessionId} != null and ${session.sessionId} == ${tripMateInfo.writerId}" type="button" class="primary-btn" 
			th:onclick="|location.href='@{/mateRecruitUpdateForm(postId=${tripMateInfo.postId})}'|">수정</button>&nbsp;&nbsp;
			<button th:if="${session.sessionId} != null and ${session.sessionId} == ${tripMateInfo.writerId}" type="button" class="primary-btn" 
			th:onclick="|location.href='@{/mateRecruitDelete(postId=${tripMateInfo.postId})}'|">삭제</button>&nbsp;&nbsp;
			<button type="button" class="primary-btn" onclick="location.href='tripMateList'">목록으로</button>
		</form>
	</div>
	<!-- 댓글 기능 -->
	<div align="center">
		<form action="">
			<table id="comment" style="font-size:0.9em; text-align: center;width: 1070px; margin: 0 auto; height : 60px; background-color: white;">
				<tr>
					<td>
					<input type="hidden" id="" value="${게시글 번호}">
					<input type="hidden" name="writerId" th:value="${session.sessionId}">
					</td>
					<td colspan="3"><textarea rows="3" cols="50" id="content"></textarea></td>
					<td><input type="button" value="댓글달기" onclick="comment_save()"></td>
				</tr>
			</table>
		</form>
	</div>
	
	
	
	
	
	<script th:inline="javascript">
	// 댓글 저장
	function comment_save() {
		//댓글 저장 버튼 클릭 시 세션 아이디가 없으면 로그인 페이지로 이동
		if ('${session.sessionId}' == "") {
			alert("로그인 후 사용 가능합니다.")
			//location.href="로그인 페이지로 이동"
		}else {
			var nick = $("#nick").val();
			var content = $("#content").val();
			var numgroup = $("#numgroup").val();
			var step = $("#step").val();
			var form = {
				nick : nick,
				content : content,
				numgroup : numgroup,
				step : step,
			}
			//댓글 내용이 없는 경우 알림
			if(content=="") {
				alert("댓글 내용을 입력하세요.")
				$("#content").focus()
			}else{
				$.ajax({
					url : "/",
					type : "POST",
					data : form,
					success : function(list) {
						//성공하면 댓글 리스트에 해당 값을 저장
						//showComment(list);
						//console.log("성공")
					},
					error : function(request, status, error) {
						console.log("실패")
						//alert("code:" + request.status + "\n" + "message:"
								+ request.responseText + "\n" + "error:" + error);
					}
				});
			}
		}
	}
	
	
	</script>
</body>
</html>