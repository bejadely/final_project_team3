<!DOCTYPE html>
     <html lang="en" xmlns:th="http://www.thymeleaf.org"
            xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
               layout:decorate="@{layouts/default_layout}"
               layout:fragment="content"> 
    
        
<head>
<meta charset="UTF-8">
<title>로그인 / 회원가입 폼 템플릿</title>
    <!--    <link rel="stylesheet" href="style.css"> -->
 <style>
* {
    margin: 0;,
    padding: 0;
    font-family: sans-serif;
}
.wrap {

  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  height: 100%;

    width: 100%;
    background-image: url(/img/login/background.jpg);
    background-position: center;
    background-size: cover;
     position: relate; 
}
.form-wrap {
    width: 380px;
    height: 480px;
    position: relative;
    
 /*    margin: 6% auto; */
/*  margin-top: 6%; */
    background: #fff;
    padding: 5px;
    overflow: hidden;
}
.button-wrap {
    width: 300px;
    margin: 35px auto;
    position: relative;
    box-shadow: 0 0 600px 9px #fcae8f;
    border-radius: 30px;
}
.togglebtn {
    padding: 5px 10px;
    margin-left : 8px;
   /*  margin-right : 10px; */
    cursor: pointer;
    background: transparent;
    border: 0;
    outline: none;
    position: relative;
}
#btn {
    top: 0;
    left: 0;
    margin-top : 5px;
    position: absolute;
    width: 150px;
    height: 80%;
    background:  #1fa3d7;
    border-radius: 30px;
    transition: .5s;
}
.social-icons {
  
    text-align: center;
}
.social-icons img {
padding:5px;
 width: 300px;
    cursor: pointer;
}
.input-group {
    top: 150px;
    position: absolute;
    width: 280px;
    transition: .5s;
}
.input-field {
    width: 100%;
    padding: 10px 0;
    margin: 5px 0;
    border: none;
    border-bottom: 1px solid #999;
    outline: none;
    background: transparent;
}
.submit {
    width: 100%;
    padding: 5px 5px;
    cursor: pointer;
    display: block;
    margin: auto;
    background: #1fa3d7;
    border: 0;
    outline: none;
/*     border-radius: 30px; */
}
.checkbox {
    margin: 30px 10px 30px 0;
}
span {
    color: #777;
    font-size: 12px;
    bottom: 68px;
    /* position: absolute; */
}
#member {
    left: 50px;
}
#guide {
    left: 450px;
} 

#find {
  text-align: center;
}

#find a.property-sub {
  display: inline-block;
}
</style> 
</head>
    <body>

   
        <div class="wrap">
            <div class="form-wrap">
                <div class="button-wrap">
                    <div id="btn"></div>
                    <button type="button" class="togglebtn" onclick="member()">&nbsp;&nbsp;회원 로그인&nbsp;&nbsp;</button>
                    <button type="button" class="togglebtn" onclick="guide()">&nbsp;가이드 로그인</button>
                </div>
                                         
                <!-- 일반 로그인 -->
                <form id="member" action="/loginProc" method="post" class="input-group">      
                    <input type="text" class="input-field" name="memberId" placeholder="아이디"  id="id" ><!-- required -->
                    <input type="password"  class="input-field"name="password" placeholder="비밀번호" id="pw" ><!-- required  -->
             <!--        <input type="checkbox" class="checkbox"><span>Remember Password</span> -->
                            <font id="checkId" size="2"></font>
             
             <div id="find">
                <a th:href="@{/member/memberInsert}"class="property-sub">아이디 찾기</a>
                 <span>&nbsp;|&nbsp;</span>
           <a th:href="@{/member/memberInsert}"class="property-sub">비밀번호 찾기</a>
           </div>
                <br/>
                <br/>
                    <button type="submit" class="submit">일반 로그인</button>
                         <!--  SNS로그인 -->
                      <div class="sns">
                         <div class="social-icons">
                            <!--  카카오 API를 사용하여 OAuth 2.0 인증을 위한 URL -->             
                         <a  th:href="@{https://kauth.kakao.com/oauth/authorize?client_id=7a2faaf15ad43d8157f12b22e12d694d&redirect_uri=http://localhost:8787/member/kakaologin&response_type=code}">
                         <img  id="kakao" src="/img/login/카카오로그인.png" height="50" alt="kakao"    ></a>
                          <!-- 네이버 API로그인  -->
                          <a  th:href="@{${url}}"><img id="naver" src="/img/login/네이버로그인.png" height="50" alt="naver"   ></a>                     
                        </div>
                   </div>
                         <a th:href="@{/member/memberInsert}"class="property-sub">회원가입</a>
<!--                     <button  type="submit" class="submit" onclick="location.href='memberInsert'">회원가입</button>
 -->                </form>
                
            <!--  가이드 로그인 -->
                 <form id="guide" action="/loginProc" method="post" class="input-group">      
                    <input type="text" class="input-field" name="memberId" placeholder="아이디" id="id1"><!-- required -->
                    <input type="password"  class="input-field"name="password" placeholder="비밀번호" id="pw1"><!-- required  -->  
                   		 <font id="checkId1" size="2"></font>    
		             <div id="find">
		             		 <a th:href="@{/member/memberInsert}"class="property-sub">아이디 찾기</a>
		              <span>&nbsp;|&nbsp;</span>
		           			<a th:href="@{/member/memberInsert}"class="property-sub">비밀번호 찾기</a>
		          	 </div>
		                <br/>
		                <br/>
		                    <button type="submit" class="submit" > 로그인</button>
		            <a th:href="@{/member/guideInsert}"class="property-sub">회원가입</a>
                </form>
               
            </div>
        </div>

        <script>
           var v = document.getElementById("kakao");
           var w = document.getElementById("naver");
            var x = document.getElementById("member");
            var y = document.getElementById("guide");
            var z = document.getElementById("btn");
            function member(){
         /*       v.style.left = "500px";
               w.style.left = "500px"; */
                x.style.left = "50px";
                y.style.left = "450px";
                z.style.left = "0";
            }
            function guide(){
                x.style.left = "-400px";
                y.style.left = "50px";
                z.style.left = "150px";
            }
        </script>
        
        <!-- 로그인시 아이디 비밀번호 DB에 있는지 확인 -->         
        <script>       
        
      //이벤트 핸들링 등록. HTML 요소가 모두 로딩된 이후에 이루어져야 하므로.
        $(document).ready(function(){
           $('#member').on('submit', loginAccountcheck);
           $('#guide').on('submit', loginAccountcheck1);
        });
        
        
        function loginAccountcheck(event){      
        event.preventDefault();            
        let userId = $('#id').val(); // input_id에 입력되는 값
      let userPassword = $('#pw').val();
      $.ajax({
         /* url : "IdCheckService", */
         url : "/loginAccountCheck", 
         type : "post",
         data :  {memberId :userId , password:userPassword},
         dataType : 'json',
         
         success : function(result){
            if(result == 0){
               
               $("#checkId").html('아이디 또는 비밀번호가 틀렸습니다.');
               $("#checkId").attr('color','red');//멈춰야함
               
            
            } else{   
               //event.unbind();
               //$("#checkId").html('사용할 수 있는 아이디입니다.');
               //$("#checkId").attr('color','green');
               $('#member')[0].submit();
               //$('#guide')[0].submit();
            }  
         },
         error : function(){
            
            alert("서버요청실패");
         }
      });
      //$('#member').submit();
       
   }
        
        function loginAccountcheck1(event){      
            event.preventDefault();            
            let userId1 = $('#id1').val(); // input_id에 입력되는 값
          let userPassword1 = $('#pw1').val();
          $.ajax({
             /* url : "IdCheckService", */
             url : "/loginAccountCheck", 
             type : "post",
             data :  {memberId :userId1 , password:userPassword1},
             dataType : 'json',
             
             success : function(result){
                if(result == 0){
                   
                   $("#checkId1").html('아이디 또는 비밀번호가 틀렸습니다.');
                   $("#checkId1").attr('color','red');//멈춰야함
                                
                } else{   
                   //event.unbind();
                   //$("#checkId").html('사용할 수 있는 아이디입니다.');
                   //$("#checkId").attr('color','green');
                   //$('#member')[0].submit();
                  $('#guide')[0].submit();
                }  
             },
             error : function(){
                
                alert("서버요청실패");
             }
          });
          //$('#member').submit();
           
       }
 </script>
 
   
    
    </body>
</html> 

